import React, { useEffect } from 'react';
import './App.css'
import AudioPlayer from './AudioPlayer'
import { useScrollPosition } from './hooks/useScrollPosition';

function App() {
  const appRef = React.useRef<HTMLDivElement | null>(null);
  const ref = React.useRef<HTMLDivElement | null>(null);
  const scrollPosition = useScrollPosition();
  const [isSticky, setIsSticky] = React.useState(false);
  const [visibleBottomOfPlayer, setVisibleBottomOfPlayer] = React.useState<number | undefined>();

  useEffect(() => {
    if (!appRef.current || !ref.current) return;
  
    const rect = ref.current!.getBoundingClientRect();
    const viewportHeight = window.innerHeight;
    const visibleBottom = Math.min(viewportHeight, rect.bottom);
    setVisibleBottomOfPlayer(visibleBottom);
  }, []);

  useEffect(() => {
    if(visibleBottomOfPlayer) {
        setIsSticky(scrollPosition > visibleBottomOfPlayer);
    }
  }, [scrollPosition, visibleBottomOfPlayer]);

  return (
    <div className='App' ref={appRef}>
      <div>
        <a href="https://vite.dev" target="_blank">
          Menu link 1
        </a>
        <a href="https://react.dev" target="_blank">
          Menu link 2
        </a>
      </div>
      <h1>Developers got bored in free time too</h1>
      <div>
        <h2>Article</h2>
        <p>Summary: Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat molestiae perferendis voluptatum fuga excepturi modi earum fugiat, amet ab optio consequuntur ex at sit animi aliquam. Iste commodi blanditiis veniam.</p>
        <AudioPlayer 
          src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
         containerRef={ref}
         isSticky={isSticky}
         />
        <div className='article-content'>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Beatae unde tempore blanditiis labore animi aut amet est aspernatur. Cupiditate veritatis iure numquam earum quidem velit a tenetur, repellat in neque.</p>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Beatae unde tempore blanditiis labore animi aut amet est aspernatur. Cupiditate veritatis iure numquam earum quidem velit a tenetur, repellat in neque.</p>
        <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Beatae unde tempore blanditiis labore animi aut amet est aspernatur. Cupiditate veritatis iure numquam earum quidem velit a tenetur, repellat in neque.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Distinctio, libero odit odio assumenda aut quidem expedita suscipit ex ipsum quaerat cupiditate reprehenderit, optio exercitationem molestiae iure quod! Consequatur, eveniet. Ab consequuntur ducimus voluptates earum rem optio explicabo aspernatur. Voluptates ipsa officia deleniti esse laborum minus alias, quos assumenda quasi eius? Unde, aspernatur impedit iusto nisi sit dicta temporibus assumenda odio repellendus ducimus veritatis, eius corporis eligendi perspiciatis quam, eaque doloribus deserunt natus voluptas totam. Temporibus accusantium, et incidunt doloremque magnam fugiat tempora recusandae voluptatibus tenetur qui quo eum! Eligendi atque facere numquam qui ratione sit molestiae, iusto ex cum laborum magni pariatur dolore quis autem delectus id incidunt aspernatur odio nulla dolorem ipsam, doloribus esse! Consequuntur exercitationem quasi vitae amet dolorem voluptatibus iste officiis? Mollitia perspiciatis sed ullam quia, ipsam amet inventore deserunt optio iste, ex unde ratione libero blanditiis, a numquam. Harum qui laboriosam deleniti aut quae! Corrupti dicta dolorum, suscipit doloribus earum repudiandae iste reprehenderit, saepe recusandae commodi magnam voluptate esse. Ea magni molestias rem deleniti ad, porro sequi enim facere dolorum nisi esse consequatur hic amet similique placeat, debitis laborum quasi natus, provident quisquam. Soluta molestias voluptatibus, tempore, nobis sit necessitatibus nisi minima alias aliquam sapiente, ex ad iste quas fuga repellendus iure minus veniam voluptas earum quibusdam est nesciunt ut recusandae officiis? Consequuntur, qui iste. Omnis, eius ratione? Vero at laudantium culpa ipsa repellendus voluptatum. Qui aliquam delectus facilis ipsam iste impedit labore aperiam voluptatum recusandae ducimus! Provident, quibusdam. Consectetur voluptas eveniet quibusdam obcaecati blanditiis labore, dignissimos vitae, molestias distinctio fugiat dolorem voluptatum illum dolores odit vero hic. At dolores incidunt, expedita velit dolorum sit eveniet sed quod accusamus, illum nesciunt repellat consectetur quas laboriosam quasi sint fugiat impedit voluptate, iste placeat praesentium libero odio et! Est, reprehenderit. Officiis quaerat sunt ipsum neque repellendus reiciendis aut natus at delectus corporis itaque placeat accusamus quae nulla ipsam ullam optio, dicta ratione assumenda voluptatum! Nobis minus cupiditate possimus cumque harum, quasi itaque a animi recusandae fuga commodi quis nesciunt quidem dolorum consectetur? Reiciendis, voluptas rerum. Ex numquam nemo sed a, quo blanditiis mollitia itaque accusamus recusandae, et dolores repudiandae voluptatum ducimus culpa perspiciatis! Odit ad a explicabo, quam voluptate natus minus dolorem provident reprehenderit saepe ab esse labore non temporibus est? Ullam, quo maiores, eos non eligendi velit nisi animi sunt totam facilis iste consequatur expedita soluta voluptatum! Perferendis sint accusantium, eligendi ipsa quas suscipit necessitatibus sapiente quaerat dignissimos, vitae temporibus in numquam. Error autem tenetur delectus laudantium esse molestiae reiciendis at animi dignissimos velit omnis, sunt, accusantium ex obcaecati nulla, repellat quod sapiente nostrum a sed odio inventore natus. Nobis, doloribus est quos hic debitis quam. Officia suscipit minima quae, fuga aliquid incidunt ipsa dicta, beatae consequatur provident vitae, sunt consectetur necessitatibus temporibus expedita. Nobis quae tenetur ipsum, quibusdam tempore cumque fuga eius fugit, ut odio expedita excepturi provident vero facilis ratione alias? Minima quidem dolores ad beatae exercitationem amet nulla saepe! Nemo quam qui iusto quaerat deserunt sapiente quos odit architecto! Voluptatibus ipsa reiciendis numquam? Placeat magni illum sapiente eos distinctio itaque voluptatem labore libero. Ipsa, unde. Incidunt magni dignissimos consequatur tempora veritatis maiores saepe placeat reprehenderit, distinctio, aspernatur dolore quisquam fugit? Odit ipsum quaerat asperiores nobis a laudantium laborum velit dolor officiis facere! Atque, sunt velit, eos veniam natus eum nesciunt ea provident vitae cupiditate sequi unde iste est! Architecto reiciendis neque non aliquam atque officiis porro, recusandae libero quidem quos inventore ullam sint aperiam odio quo ipsum voluptatum suscipit odit eaque at molestias consectetur molestiae? Recusandae nesciunt, praesentium suscipit vitae itaque placeat eligendi laudantium quam cupiditate sunt facere inventore quo id quos tempore sed eveniet doloremque dicta modi! Debitis soluta, magni nemo, quos esse cumque ipsam possimus illum labore fugiat nostrum odio velit a repellat eos delectus veniam adipisci saepe reprehenderit aut iure architecto aliquam vero hic? Inventore accusamus rerum repellendus sapiente hic, distinctio officia quaerat, ut pariatur expedita sint est consequuntur adipisci eaque molestias necessitatibus laboriosam. Possimus, illo temporibus architecto nulla dolorum aspernatur odio nesciunt atque provident quaerat consectetur iusto corporis, quisquam ducimus id sint? Quos, temporibus nam officia voluptates ullam, distinctio quam laboriosam nisi non ex cumque exercitationem rem delectus iure natus molestias dicta similique? Harum deserunt fugiat cupiditate in iste reiciendis quae eaque rem asperiores debitis, obcaecati, quod ut fugit pariatur molestias neque accusantium eligendi nostrum. Laborum modi facere, officiis ut architecto doloremque recusandae saepe dignissimos amet maxime repudiandae vero ex dolorum facilis corporis tempora eos vitae optio non ullam natus tenetur exercitationem aliquam. Dolorem culpa quaerat saepe, voluptatum laboriosam ex voluptas veniam officiis eligendi porro cum enim, asperiores magnam harum eius molestias nisi iste architecto corporis fuga voluptatem nam repellat, cupiditate libero! Cumque nihil rem asperiores ducimus laboriosam impedit ullam dolorum doloribus delectus, explicabo nam porro earum laborum non minus culpa reprehenderit, enim deleniti? Ratione praesentium eius iusto dignissimos aspernatur tempore dolorum aliquam. Laudantium veniam non praesentium earum rerum dolorem deserunt, repellendus labore perspiciatis alias facilis, fugiat ut harum voluptate illum, neque quisquam incidunt. Consequatur dignissimos, totam tempore nobis ut neque esse in quaerat vel quis ab, aspernatur saepe facere fugiat! Vero optio architecto quam fuga, sapiente expedita, quas animi numquam tempora praesentium, adipisci ipsa! Ipsa, libero delectus? Praesentium quos atque nisi provident optio tempora reprehenderit magnam blanditiis! Asperiores atque mollitia non molestias commodi, quasi est nobis laboriosam. Assumenda voluptatibus vero in, culpa porro maiores hic. Consequuntur, iusto? Eveniet vitae molestiae ex illum autem perspiciatis inventore sapiente natus. Iusto quidem soluta eum ipsum architecto itaque non inventore illum. Ab omnis, eaque quae sed repellat, numquam soluta blanditiis est ducimus, ipsum modi rerum mollitia? Beatae illo perferendis, officiis hic eius praesentium saepe fugit modi eveniet cum, blanditiis laborum reprehenderit iste! Laudantium deserunt explicabo, nulla ipsum esse quas aliquam vitae amet earum doloremque delectus in. Tempora repudiandae, nostrum ex eligendi veritatis quisquam fuga temporibus laboriosam! Consectetur beatae quo, possimus cum reprehenderit maxime laboriosam dolorum architecto non delectus ratione harum veritatis veniam animi atque ipsa facilis ex dolores fugit cupiditate et itaque optio nostrum eum! Dolorum eius ipsam ducimus sunt doloribus. Illum repellat neque eos esse sapiente tempore possimus provident at enim omnis, recusandae animi, dicta autem numquam cumque accusamus quos, dolores ducimus delectus a. Corporis, quasi ullam eum deserunt dicta culpa voluptatibus natus, voluptate praesentium molestiae, dolores eligendi est vitae. Omnis, qui libero molestias eveniet repudiandae quis vero in. Numquam consequuntur fugit modi dolorem neque asperiores, voluptas natus. Tempore inventore quia libero iste sed accusantium delectus officiis corrupti repellendus sapiente animi ea aperiam nihil iusto mollitia, eveniet aliquid suscipit architecto tenetur distinctio quasi, modi ut? Perspiciatis dolores dicta soluta laboriosam maiores dolorum, doloremque repellendus nesciunt sunt accusamus ipsam quidem, libero incidunt doloribus, tempora dignissimos atque sed eaque a distinctio possimus minima in aspernatur. Veniam nihil dolor tempore ducimus similique reprehenderit pariatur officiis esse aliquam voluptatum hic ipsum veritatis, quae doloremque recusandae sint, libero numquam voluptas voluptatibus est vel? Saepe, pariatur eos iusto earum consectetur odio doloribus incidunt nisi voluptatibus rerum, ex perferendis perspiciatis asperiores, facilis hic voluptatem voluptates omnis laudantium ullam. Velit ratione eum corporis deserunt ducimus non nobis assumenda accusantium alias atque delectus vel corrupti, nam obcaecati beatae optio voluptatem debitis in unde repudiandae dignissimos! Quae architecto quos sit excepturi, corporis cupiditate, provident ipsa doloremque sapiente reprehenderit sed ea unde incidunt eaque quam illum debitis hic impedit quis esse, ut officiis! Omnis temporibus nisi eum quibusdam ex aspernatur nostrum iure libero, explicabo, eligendi architecto eaque dicta asperiores velit sequi magni, nihil odio voluptates error accusamus assumenda esse pariatur corporis. Molestiae doloremque placeat, quam officia dolore vero ratione esse. Doloremque placeat tempora quidem sapiente! Suscipit, voluptatem quos! Distinctio magnam numquam, dolor, dolorum consequatur ducimus ipsum saepe debitis soluta asperiores dolores itaque sint minus placeat doloribus perferendis nam omnis. Illo tenetur labore aut aliquam debitis accusamus qui dolores iste enim quibusdam autem veniam, nisi mollitia dolor, obcaecati distinctio non earum vero voluptas? Fugit maxime vel modi odit voluptate, necessitatibus eveniet delectus perspiciatis sunt temporibus nemo nobis numquam. Error vitae iste quisquam atque eaque fuga ut tempora officiis non debitis deserunt, quia enim cumque mollitia voluptas quo dolore laboriosam. Perferendis molestias iure modi eos in nihil, tempore eius facere iusto quis libero obcaecati aliquam quidem. Minus adipisci officiis perferendis, aspernatur tempora quos, reprehenderit qui corporis rerum enim exercitationem id quisquam, temporibus molestias illo ea corrupti tenetur. Voluptates ex obcaecati est at alias repellat excepturi, harum numquam nobis laudantium dolores odio perferendis id ipsa quae facere esse. Quam aspernatur reprehenderit, natus laborum perferendis voluptas tempore officiis quisquam aut odio cum provident, magni accusamus adipisci dolores eaque nostrum fuga itaque debitis asperiores cupiditate velit sint! Vitae aliquam expedita pariatur maiores! Eveniet, dolorum cupiditate! Est veritatis soluta aperiam? Nam quae nostrum voluptatem hic iure reiciendis ullam, repellat incidunt unde eligendi? Quod rerum praesentium exercitationem ipsum deleniti alias placeat, commodi quo modi adipisci magni, tenetur, fugiat hic odit recusandae. Ducimus accusamus earum quibusdam aut non doloremque repudiandae repellat ad delectus eligendi perspiciatis quos et doloribus velit expedita commodi placeat id, similique, repellendus, impedit porro minima vel officia. Enim ex perspiciatis aperiam cum, quas sapiente facilis dignissimos est officia ea debitis libero cumque cupiditate eligendi suscipit et! Eligendi, dolore, optio temporibus reiciendis fuga alias id reprehenderit nulla sapiente ipsa saepe voluptatibus? Totam distinctio quidem dignissimos modi earum veritatis excepturi, corporis quis tempora facilis corrupti tenetur numquam rem est commodi molestias quod, illum, non vitae error fuga dolorum harum veniam? Quam voluptates sit saepe cumque, officiis mollitia quod sunt tempora nihil blanditiis non porro dolor aperiam quae quis quasi eligendi fuga sint numquam, odio dolore vitae iure autem asperiores? Esse, ab qui? Unde, nemo quam. Porro sequi animi quaerat libero assumenda adipisci inventore et quidem quasi odit ipsam, iure molestiae fugit alias repudiandae nulla molestias? Laborum nobis, praesentium cumque nulla consequuntur quo totam doloremque. Facere et quibusdam asperiores saepe tempora. Recusandae dolores hic eligendi ducimus obcaecati sapiente officia id aut aliquid quaerat excepturi, saepe corporis totam? Commodi iste consequatur nam maiores reiciendis voluptas ad placeat non adipisci repellendus. Ipsum, repellendus ex necessitatibus sunt iusto similique ad quos rerum blanditiis numquam aliquam placeat consequuntur nulla inventore cumque pariatur perspiciatis, qui repudiandae dicta molestiae facilis soluta voluptatum! Consequuntur dolorem laudantium et aliquid! Incidunt alias, delectus debitis rerum ad dolorum hic perspiciatis accusantium, sint suscipit in quas corrupti provident asperiores voluptas? Magni culpa labore mollitia iusto atque unde repellat, consequuntur voluptates, deserunt, necessitatibus iste quod qui nesciunt? Laudantium dolores eos libero recusandae nisi rem quaerat amet esse quisquam laborum sed fuga, quia doloribus minima accusamus vel placeat molestiae totam! Doloremque nam sint vel eligendi ab earum, voluptatum dicta perspiciatis omnis explicabo assumenda voluptas deserunt repudiandae corrupti reiciendis cum eos officiis sit et fuga sapiente? Praesentium, enim. Eius sequi saepe repellat, tempore dicta perferendis laboriosam odit architecto voluptatum ab. Necessitatibus nihil blanditiis soluta sit ea saepe deleniti quia veniam. Esse eaque sapiente nisi magnam alias tempore numquam dolores quo cupiditate. Totam sequi, odit, obcaecati, voluptatibus eveniet reiciendis aut laborum repudiandae pariatur officiis dolores iste et deleniti vel. Velit, in ipsa earum aspernatur dolorem odio tenetur necessitatibus eligendi laborum explicabo ratione mollitia libero tempore laudantium corporis recusandae dolor voluptatum, distinctio cupiditate maxime ut non! In provident illo, numquam commodi iste, quam delectus et dignissimos modi officiis magnam vero obcaecati non sit maxime blanditiis culpa quas neque accusamus! Reprehenderit fugit distinctio suscipit tenetur, itaque, sint quas enim veritatis repudiandae sunt rem, quaerat voluptatibus excepturi esse eum laborum earum voluptatum dolore blanditiis minus reiciendis voluptates ea ab! Natus, asperiores quia! Perferendis eveniet tempora nobis consequuntur amet magni minima ullam alias. Velit hic adipisci ad ratione. Sed ratione reprehenderit illo aliquam commodi facilis in molestias iure debitis. A ratione similique illum? Temporibus dolorem magni iusto fugiat dicta error at rem architecto, ad fuga, corporis perspiciatis, eius odio iure ut sint facere! Aperiam cum, vel laborum odit hic, incidunt repellat minima perferendis, unde sequi impedit obcaecati delectus vitae facilis? Ipsum sit, tempora, suscipit hic atque velit est, culpa quod maiores sed quo! Veniam, minus. Aut officiis similique modi explicabo ducimus, debitis, a quas rerum est voluptatibus aperiam ut? Exercitationem facilis eius eligendi cumque, est quam cupiditate quidem aliquam nam laudantium vel eum iure repellendus iste aut incidunt suscipit commodi hic qui odio id adipisci. Nemo odit tempore sapiente ratione, quam error voluptatibus voluptatum, nesciunt reprehenderit architecto, quae eligendi dolorum ex! Hic aliquam maxime provident officiis autem. Sit enim ex, perferendis molestias ullam laborum delectus. Dolores possimus nisi repellendus. Nihil nesciunt fuga nulla ullam non dicta provident eos, eius molestiae enim suscipit! Ipsum placeat recusandae accusamus molestias, voluptatem voluptatum, dolor numquam doloribus vero odit distinctio, aperiam exercitationem natus nemo voluptate. Provident porro fugiat ullam eum, fuga totam veniam delectus beatae enim iusto natus eveniet! Error culpa laboriosam doloremque necessitatibus rerum consectetur ipsum tempora optio reprehenderit, illo voluptates nisi fugit adipisci? Molestiae ratione saepe esse facilis veritatis reprehenderit corporis explicabo nihil doloremque. Nisi ducimus assumenda ipsa tempora magnam rem numquam, iure adipisci esse autem molestiae ipsam doloremque impedit a perspiciatis! Incidunt animi maiores ex possimus asperiores autem quaerat, error debitis voluptatem nisi, molestiae optio modi magnam molestias illo facilis, saepe quae vitae repellendus sapiente minus! Perferendis iste quasi est porro ab, nobis iusto vel at earum voluptatem minima molestias quo, fugiat maxime odit ut culpa facilis alias? Ducimus quaerat commodi id aut molestiae esse amet, doloribus, est molestias veniam tempore similique, nobis soluta illo corrupti maxime facere. Ea commodi dolore culpa, natus fugiat unde eligendi provident at similique nobis assumenda laborum corrupti delectus qui magnam enim, in tempora quo! Pariatur reprehenderit officiis assumenda! Atque repudiandae commodi sit libero, aliquam temporibus nisi recusandae ratione animi debitis quae facilis eos labore omnis maxime quibusdam nam praesentium consectetur non obcaecati iste doloribus dicta optio nulla? Temporibus cupiditate et voluptatum, aspernatur, quod ab commodi porro alias modi officia, dolores atque! Aspernatur hic blanditiis neque asperiores pariatur assumenda, vel eveniet, provident vitae recusandae nemo consequuntur rerum fugit sed ex laudantium architecto deserunt nulla in dignissimos debitis quae voluptate! Cupiditate maxime nihil iste, ratione est natus deserunt laboriosam minus, exercitationem sequi delectus amet quo, dolorum aspernatur! Possimus rem consectetur eligendi. Ab autem impedit distinctio adipisci, aspernatur minus laborum quas molestiae obcaecati fugiat qui, sequi pariatur consectetur quisquam culpa repudiandae praesentium cumque tempora delectus corporis! Porro aliquid nesciunt corporis, magni, quod vero eaque sed quia animi officia cum exercitationem ducimus illum fuga magnam corrupti fugiat eius quo cumque? Sequi distinctio, deserunt ducimus quaerat laudantium aliquam, architecto velit deleniti voluptatum sint consequatur fugit quam! Reprehenderit sunt expedita possimus minus dicta velit sit nesciunt, commodi debitis sint! Impedit quasi aliquid ipsam consectetur dolorum necessitatibus quis, earum corporis magni veritatis officiis labore ipsa dolore? Ipsa distinctio, asperiores voluptatem consectetur quod repudiandae minima consequatur voluptates quis sapiente explicabo quas culpa adipisci officiis reprehenderit modi harum hic natus. Laborum enim perspiciatis molestias alias modi vitae accusamus dolore vero itaque eos repellendus, iste quae, iure minus blanditiis. Totam quibusdam dolores accusamus temporibus repudiandae optio necessitatibus excepturi praesentium at ea. Quidem eveniet omnis error autem illum cum repellat temporibus beatae itaque. Praesentium, libero obcaecati quisquam provident incidunt distinctio cum impedit perspiciatis! Iste earum debitis nulla, nesciunt dolores perferendis numquam non laboriosam asperiores eius, minima, explicabo dolor quis! Omnis ut id tenetur vitae labore sint repellat, harum officiis iure sunt est error maiores qui quam perspiciatis placeat odit quos facilis.</p>
        </div>
      </div>
    </div>
  )
}

export default App
